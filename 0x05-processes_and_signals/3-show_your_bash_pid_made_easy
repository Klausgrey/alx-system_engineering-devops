#!/usr/bin/env bash
# Loop through all directories in /proc

for pid_dir in /proc/*/; do
	pid=$(basename "$pid_dir")

	# Check if the directory name is a number (PID)
	if [[ "$pid" =~ ^[0-9]+$ ]]; then
		# Read the command line used to start the process from the cmdline file
		cmd=$(tr '\0' ' ' < "$pid_dir/cmdline")

		# Check if the command line contains the word "bash"
		if [[ "$cmd" == *bash* ]]; then
			# Extract the process name from the command line
			process_name=$(basename "$cmd")

			# Print PID and process name
			echo "$pid $process_name"
		fi
	fi
done
